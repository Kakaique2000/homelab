#!/bin/bash
# Wrapper script for kubectl using local kubeconfig

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
KUBECONFIG_FILE="$SCRIPT_DIR/.kube/config"

if [ ! -f "$KUBECONFIG_FILE" ]; then
  echo "ERROR: Kubeconfig not found at $KUBECONFIG_FILE"
  echo ""
  echo "Please run ./5-install-kubernetes.sh first to download the kubeconfig"
  echo "Or manually download it:"
  echo "  mkdir -p $SCRIPT_DIR/.kube"
  echo "  scp ansible-agent@\$MASTER_IP:~/.kube/config $KUBECONFIG_FILE"
  exit 1
fi

export KUBECONFIG="$KUBECONFIG_FILE"
kubectl "$@"
